---
- name: disable watchdog
  sysctl:
    name: kernel.nmi_watchdog
    value: "0"
    sysctl_file: /etc/sysctl.d/10-disable_watchdog.conf

- name: Swappiness
  sysctl:
    name: vm.swappiness
    value: "10"
    sysctl_file: /etc/sysctl.d/10-vm_swappiness.conf

- name: Intel Microcode - to stop CPU from overworking
  apt:
    name: intel-microcode
    state: latest

#####################
# TLP
#####################

- name: Add tlp apt repo
  apt_repository:
    repo: ppa:linrunner/tlp
    codename: "{{ os_codename }}"

- name: Install tlp
  apt:
    name:
      - tlp
      - tlp-rdw
    state: latest

#####################

- name: Install powertop
  apt:
    name: powertop
